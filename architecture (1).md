# ๐ architecture.md

## ๐ฏ ูุฏู ูพุฑูฺู

ุณุงุฎุช ฺฉ ูุฏู ููุด ูุตููุน ุจุฑุง ุชุญูู ุจุงุฒุงุฑ ุงุฑุฒ ุฏุฌุชุงู ฺฉู ุจุชูุงูุฏ:

- ุจุง ุตุฏูุง ูฺุฑ ูุฎุชูู (ุชุง 1000 ูฺุฑ) ฺฉุงุฑ ฺฉูุฏ.
- ุฏุฑ ูุญุธู ุดุฑุงุท ุจุงุฒุงุฑ ุฑุง ุจุฑุฑุณ ฺฉุฑุฏู ู ูฺุฑูุง ูุคุซุฑ ุฑุง ูุนุงู ุง ุชููุชุ ู ุจโุงุซุฑูุง ุฑุง ุชุถุนู ุง ุญุฐู ฺฉูุฏ.
- ุจุชูุงูุฏ ุฏุฑ ุตูุฑุช ูุจูุฏู ุจุนุถ ุฏุงุฏูโูุงุ ุจุฏูู ุชููู ุงุฏุงูู ุฏูุฏ.
- ุฎูุฏ ุฑุง ุจู ุตูุฑุช ุฒูุฏู ุจุง ุจุงุฒุงุฑ ุชุทุจู ุฏูุฏ (ุจุงุฒุงุฑ adaptive).

---

## ๐ฅ ุฏุงุฏูโูุง ูุฑูุฏ (ุจุง API ุฑุงฺฏุงู)

### 1. OHLCV (ุจุงุฒ ู ุจุณุชู ุดุฏู ููุชุ ุณููุ ฺฉูุ ุญุฌู)

- API: [Binance API](https://github.com/binance/binance-spot-api-docs)
- ุฏุงุฏู: ูุญุธูโุงุ ุฑุงฺฏุงูุ ุจุฏูู ูุญุฏูุฏุช ุฌุฏ

### 2. ุชฺฉ ุฏุชุง (tick data)

- API: [Binance Websocket API]
- ุฏุฑุงูุช ุณูุงุฑุดุงุช ูุญุธูโุง ู ูฺฉุฑูุญุฑฺฉุงุช ุจุงุฒุงุฑ

### 3. ุงูุฏฺฉุงุชูุฑูุง ุชฺฉูฺฉุงู

- ูุดุชูโุดุฏู ุงุฒ OHLCV
- ูุญุงุณุจู ุจุง [ta-lib](https://mrjbq7.github.io/ta-lib/) ุง [Pandas TA](https://github.com/twopirllc/pandas-ta)
- ูุซู: RSI, MACD, Bollinger Bands, EMA, ADX, ATR, etc

### 4. ุงุญุณุงุณุงุช ุจุงุฒุงุฑ (Sentiment)

- API: [Alternative.me Fear & Greed Index](https://alternative.me/crypto/fear-and-greed-index/)
- ุฏุงุฏู: ุฑูุฒุงููุ ุฑุงฺฏุงู

### 5. ุงุฎุจุงุฑ ุฑูุฒ ุงุฑุฒ (News)

- API: [CryptoPanic News API (Free Tier)](https://cryptopanic.com/developers/api/)
- ุฏุงุฏู: ุฑุงฺฏุงู ุจุง 1 request ุฏุฑ ุฏููู

### 6. ุฏุงุฏู ูุงูุฏุงููุชุงู (ููุท ุฑุงฺฏุงู)

- API: [CoinGecko](https://www.coingecko.com/en/api/documentation)
- ุฏุงุฏูโูุง: ุชุนุฏุงุฏ ุฏูุจุงูโฺฉููุฏฺฏุงูุ ุงุฑุฒุด ุจุงุฒุงุฑุ ุนุฑุถู ุฏุฑ ฺฏุฑุฏุดุ ุชุบุฑุงุช ุดุจฺฉู ุงุฌุชูุงุน

### 7. Order Book (ุนูู ุจุงุฒุงุฑ)

- API: [Binance WebSocket API - depth stream]
- ุฏุงุฏู ุฒูุฏู: ุณูุงุฑุดุงุช ุฎุฑุฏ/ูุฑูุด

---

## ๐งฑ ูุนูุงุฑ ุณุณุชู

### ูุงฺููโูุง ุงุตู:

#### ๐น 1. Data Encoders

```bash
/data_pipeline/
โโโ ohlcv_encoder.py
โโโ indicator_encoder.py
โโโ sentiment_encoder.py
โโโ news_encoder.py
โโโ orderbook_encoder.py
โโโ fundamental_encoder.py
```

ูุฑ encoder:

- ุฏุงุฏู ุฎุงู ุฑุง ุจู embedding ุงุณุชุงูุฏุงุฑุฏ (ูุซูุงู 64 ุจุนุฏ) ุชุจุฏู ูโฺฉูุฏ.
- ุฏุฑ ุตูุฑุช ูุจูุฏ ุฏุงุฏูุ ุฎุฑูุฌ ุตูุฑ ุง ุชุฎูู ูโุฏูุฏ.

#### ๐น 2. Mask Generator

ุจุฑุง ูุฑ ูฺุฑ ฺฉ ูุงุณฺฉ ุณุงุฎุชู ูโุดูุฏ:

```python
masks = {
  'ohlcv': 1,
  'sentiment': 1,
  'news': 0,  # ุฎุจุฑ ููุฌูุฏ ูุณุช
  'fundamental': 1,
  ...
}
```

#### ๐น 3. Soft Gating

```python
gate = sigmoid(Dense(concat(context, x))) * mask
x_weighted = x * gate
```

- ูุฒูโุฏู ูพูุง ุจุฑ ุงุณุงุณ ุดุฑุงุท ุจุงุฒุงุฑ (context-aware gating)
- ุฌููฺฏุฑ ุงุฒ ุญุฐู ูุงฺฏูุงู ูฺุฑูุง ุถุนู (ุจุฏูู ูุทุน ุงุฑุชุจุงุท ฺฉุงูู)

#### ๐น 4. Context Encoder

- ุจุง ุงุณุชูุงุฏู ุงุฒ ุฏุงุฏูโูุง ฺฉู (ูุซู OHLCV)ุ ฺฉ "ุจุฑุฏุงุดุช ุงุฒ ุดุฑุงุท ูุนู ุจุงุฒุงุฑ" ุชููุฏ ูโฺฉูุฏ.
- ุฎุฑูุฌ ุขู ุจู ุนููุงู context ุจู gating ุฏุงุฏู ูโุดูุฏ.

#### ๐น 5. Feature Aggregator

```python
final_representation = torch.cat([ohlcv_x, indicator_x, sentiment_x, ...], dim=-1)
```

#### ๐น 6. ุชุญููโฺฏุฑ ููุง (Decision Head)

ูุฏู ูุงููุฏ:

- MLP
- Transformer
- LSTM ุจุฑุง ูพุดโุจู:
- ููุช ุขูุฏู (Regression)
- ุฑููุฏ ุจุงุฒุงุฑ (Classification)
- ุณฺฏูุงู ุฎุฑุฏ/ูุฑูุด (Signal Generation)

---

## ๐ ุจุฑูุฒุฑุณุงู ูุญุธูโุง ู ฺฉูุชุฑู ุชุทุจู

- ูุฑ n ุซุงูู (ูุซูุงู 5 ุซุงูู)ุ gating ูฺุฑูุง ุจุฑูุฒุฑุณุงู ูโุดูุฏ.
- ูฺุฑูุง ุจุง ุงููุช ุจุดุชุฑุ ูุฒู ุจุงูุง ูโฺฏุฑูุฏ.
- ูฺุฑูุง ุบุฑูุนุงูุ ูุฒู ุจุณุงุฑ ูพุงู (ูุซูุงู 0.01) ุฏุฑุงูุช ูโฺฉููุฏ.
- ุฏุฑ ุตูุฑุช ุจุฑฺฏุดุช ุดุฑุงุท ุจุงุฒุงุฑุ gating ุณุฑุน ุชุบุฑ ูโฺฉูุฏ (attention-aware adjustment)

---

## ๐ก๏ธ ุชุญูู ุบุจุช ุฏุงุฏู

- ูุฏู ุจู ฺฉูฺฉ ูุงุณฺฉุ ุฏุงุฏูโูุง ุบุงุจ ุฑุง ุฏุฑ ูุธุฑ ููโฺฏุฑุฏ.
- ุฏุฑ ุจุนุถ ุดุฑุงุท (ูุซูุงู ุบุจุช ุงุฎุจุงุฑ)ุ ูโุชูุงู ุงุฒ ูุฏู ุฌุงูุจ ุจุฑุง ุชุฎูู ุงุณุชูุงุฏู ฺฉุฑุฏ.

---

## โ๏ธ ุชฺฉููููฺโูุง

- ุฒุจุงู: Python 3.10+
- ูุฑููุฑฺฉ ุงุตู: PyTorch (ูพุดููุงุฏ)
- ฺฉุชุงุจุฎุงููโูุง:
  - `pandas`, `numpy`, `requests`
  - `pandas-ta` ุง `ta-lib`
  - `websockets`, `aiohttp` (ุจุฑุง WebSocket)
  - `scikit-learn` (ุจุฑุง ุชุญูู ุฏุงุฏู)

---

## ๐งช ูพุดููุงุฏ ุชูุณุนู ุฏุฑ ูุฑุญูู MVP (ุญุฏุงูู ูุณุฎู ูุงุจู ุงุฌุฑุง):

1. ููุท ุจุง OHLCV + ุงูุฏฺฉุงุชูุฑ + sentiment ุดุฑูุน ุดูุฏ.
2. gating ุณุงุฏู (Dense layer + mask)
3. ุชุญูู ููุง ุจุง MLP ุณุงุฏู
4. ูพุณ ุงุฒ ุชุณุชุ ุณุงุฑ ูฺุฑูุง ุงูุฒูุฏู ุดููุฏ.

---

## ๐ ุงุฏุฏุงุดุช ููู

ุชูุงู APIูุง ุงุณุชูุงุฏูโุดุฏู **ุฑุงฺฏุงู ุง ุฏุงุฑุง ูุณุฎู ุฑุงฺฏุงู ูุงุจู ุงุณุชูุงุฏู** ูุณุชูุฏ ู ูุฑุฎ ุฑฺฉูุฆุณุช ูพุงู ูุงุจู ูุฏุฑุช ุฏุงุฑูุฏ. ุฏุฑ ุตูุฑุช ูุงุฒ ุจู ูุณุฎู ุญุฑููโุงุ ูุงุจู ุงุฑุชูุงุก ูโุจุงุดูุฏ.

---

ุฏุฑ ุตูุฑุช ูุงุฒ ุจู ูุณุฎู ฺฏุฑุงูฺฉ (UML ุง ุฏุงฺฏุฑุงู ุจููฺฉ) ูโุชูุงู ุขู ุฑุง ูุฒ ุงุถุงูู ฺฉุฑุฏ.

